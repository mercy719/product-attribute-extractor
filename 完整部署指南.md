# 🚀 产品属性提取助手 - 完整部署指南

## 📋 部署概述

这个指南将帮助你将产品属性提取助手部署到GitHub和Railway平台。

## 🔧 部署前准备

### 1. 必需账号
- [GitHub账号](https://github.com)
- [Railway账号](https://railway.app)
- [DeepSeek API密钥](https://platform.deepseek.com)

### 2. 项目检查
✅ 项目结构已完整
✅ .gitignore已配置（敏感文件不会被上传）
✅ 部署配置文件已准备

## 📦 步骤一：创建GitHub仓库

### 1.1 创建新仓库
1. 访问 [GitHub](https://github.com) 并登录
2. 点击右上角的 **+** 号，选择 **"New repository"**
3. 填写仓库信息：
   - **Repository name**: `product-attribute-extractor`
   - **Description**: `产品属性提取助手 - 基于Flask和LLM的智能产品属性提取Web应用`
   - **Visibility**: Public 或 Private（根据需要选择）
4. **重要**：不要勾选 "Add a README file"、"Add .gitignore"、"Choose a license"
5. 点击 **"Create repository"**

### 1.2 连接本地仓库
创建仓库后，GitHub会显示快速设置页面。运行以下命令：

```bash
# 如果你的Git用户名不是mercy719，请替换为你的用户名
git remote set-url origin https://github.com/你的用户名/product-attribute-extractor.git

# 推送代码到GitHub
git push -u origin main
```

## 🚀 步骤二：部署到Railway

### 2.1 登录Railway
1. 访问 [Railway](https://railway.app)
2. 点击 **"Login"** 并使用GitHub账号登录

### 2.2 创建新项目
1. 在Railway控制台点击 **"New Project"**
2. 选择 **"Deploy from GitHub repo"**
3. 授权Railway访问你的GitHub账号
4. 找到并选择 `product-attribute-extractor` 仓库
5. 点击 **"Deploy Now"**

### 2.3 配置环境变量
部署开始后，点击项目设置，添加以下环境变量：

#### 必需的环境变量
```
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here
SECRET_KEY=your-random-secret-key-here
```

#### 可选的环境变量
```
OPENAI_API_KEY=sk-your-openai-api-key-here
MAX_WORKERS=5
FLASK_ENV=production
```

**获取API密钥**：
- DeepSeek: [https://platform.deepseek.com](https://platform.deepseek.com)
- 生成SECRET_KEY: 可以使用 [在线生成器](https://randomkeygen.com/)

### 2.4 部署设置确认
项目已自动配置以下文件：
- ✅ `railway.toml` - Railway部署配置
- ✅ `Dockerfile.railway` - Docker容器配置
- ✅ `Procfile` - 启动命令配置

### 2.5 启动部署
1. 确认环境变量设置正确
2. 点击 **"Deploy"** 开始部署
3. 等待构建完成（通常需要2-5分钟）

## ✅ 步骤三：验证部署

### 3.1 检查部署状态
- Railway控制台应显示 **"Ready"** 状态
- 点击生成的URL访问应用

### 3.2 测试应用功能
1. **首页测试**: 访问 `https://你的项目名.up.railway.app`
2. **健康检查**: 访问 `https://你的项目名.up.railway.app/api/health`
3. **功能测试**: 上传测试文件验证属性提取功能

### 3.3 监控日志
在Railway控制台可以查看：
- 构建日志
- 运行时日志
- 错误信息

## 🔧 故障排除

### 常见问题及解决方案

#### 1. GitHub推送失败
```
错误: remote: Repository not found
解决: 检查仓库URL是否正确，确保GitHub仓库已创建
```

#### 2. Railway部署失败
```
错误: 构建失败
解决:
- 检查requirements.txt是否完整
- 查看构建日志找出具体错误
- 确保所有依赖文件都在仓库中
```

#### 3. API密钥错误
```
错误: LLM API调用失败
解决:
- 验证API密钥是否正确
- 检查API账户余额
- 确认环境变量名称拼写正确
```

#### 4. 应用无法访问
```
错误: 502 Bad Gateway
解决:
- 检查应用是否正常启动
- 查看Railway运行时日志
- 确认端口配置正确
```

## 📊 部署配置详情

### Railway配置文件
```toml
# railway.toml
[build]
builder = "NIXPACKS"

[deploy]
startCommand = "gunicorn serve_production:app --bind 0.0.0.0:$PORT --timeout 300 --workers 2"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
```

### Docker配置
项目使用Dockerfile.railway进行容器化部署，包含：
- Python 3.9环境
- Node.js 18（用于前端构建）
- 所需系统依赖
- 应用源代码
- 健康检查配置

## 🎯 部署后操作

### 1. 备份重要数据
- 定期备份用户上传的文件
- 保存应用配置和环境变量

### 2. 监控和维护
- 定期检查应用运行状态
- 监控API使用量和费用
- 更新依赖包版本

### 3. 性能优化
- 根据使用情况调整worker数量
- 配置适当的超时时间
- 监控内存和CPU使用率

## 📞 技术支持

如果遇到部署问题：

1. **查看日志**: 首先检查Railway和GitHub的详细日志
2. **检查配置**: 确认所有配置文件和环境变量正确
3. **参考文档**: 查看项目README.md中的详细说明
4. **社区支持**: 在GitHub Issues中寻求帮助

## 🎉 部署完成

恭喜！你的产品属性提取助手现在已经在生产环境中运行了！

**访问地址**: `https://你的项目名.up.railway.app`

**主要功能**:
- ✅ Excel/CSV文件上传
- ✅ 智能属性提取
- ✅ 多LLM支持
- ✅ 实时任务监控
- ✅ 结果下载

**下一步**:
- 分享你的应用链接
- 根据用户反馈进行优化
- 考虑添加更多功能